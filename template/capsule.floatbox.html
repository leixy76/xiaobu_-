
<div class="attachments-panel" id="attachments-panel">
    <h3>原文</h3><a href="{source_url}" >{source_title}</a>
    <h3>相关链接</h3><a href="{link_url}" >{link_title}</a>
    <h3>附件</h3>
    <div class="attachment-item">
        <h4>{attachment_title}</h4><a href="{attachment_file}" class="download-btn" download>下载</a>
    </div>
</div>

<script>
// 手机端浮动框展开/收起功能
document.addEventListener('DOMContentLoaded', function() {
    const panel = document.getElementById('attachments-panel');
    if (!panel) return;
    
    // 检测是否为手机设备
    function isMobile() {
        return window.innerWidth <= 768;
    }
    
    // 点击展开指示器切换显示状态
    panel.addEventListener('click', function(e) {
        if (!isMobile()) return;
        
        // 只有点击在面板边缘区域才触发（模拟点击指示器）
        const rect = panel.getBoundingClientRect();
        const clickX = e.clientX;
        
        // 如果点击在面板左侧边缘附近（指示器区域）
        if (clickX < rect.left + 40) {
            e.preventDefault();
            panel.classList.toggle('expanded');
        }
    });
    
    // 点击页面其他地方时收起面板
    document.addEventListener('click', function(e) {
        if (!isMobile()) return;
        
        if (!panel.contains(e.target)) {
            panel.classList.remove('expanded');
        }
    });
    
    // 窗口大小改变时重置状态
    window.addEventListener('resize', function() {
        if (!isMobile()) {
            panel.classList.remove('expanded');
        }
    });
});
</script>