<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>《美洲原住民历史》交互式卡片摘要</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

        :root {
            --primary-color: #34495e;
            --secondary-color: #2c3e50;
            --background-color: #f4f7f9;
            --card-bg: #ffffff;
            --accent-color: #3498db;
            --text-color: #333;
            --border-color: #ecf0f1;
            --fact-bg: #e8f4fd;
            --opinion-bg: #fef9e7;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            line-height: 1.8;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
        }

        h1 {
            color: var(--secondary-color);
            text-align: center;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .instructions {
            text-align: center;
            color: #777;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .legend {
            text-align: center;
            margin-bottom: 30px;
            font-size: 0.9em;
            color: #555;
        }

        .fact, .opinion {
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 500;
            display: inline;
        }

        .fact {
            background-color: var(--fact-bg);
            border-left: 3px solid #3498db;
        }

        .opinion {
            background-color: var(--opinion-bg);
            border-left: 3px solid #f1c40f;
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            perspective: 1000px;
        }

        .card-container {
            background-color: transparent;
            height: 450px;
            cursor: pointer;
        }

        .card {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.7s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 12px var(--shadow-color);
            border-radius: 12px;
        }

        .card-container.is-flipped .card {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
        }

        .card-front {
            background: linear-gradient(135deg, #ffffff 0%, #eef2f5 100%);
            color: var(--primary-color);
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .card-front-icon {
            font-size: 3.5em;
            margin-bottom: 20px;
            color: var(--accent-color);
        }
        
        .card-front h2 {
            margin: 10px 0;
            font-size: 1.5em;
            color: var(--secondary-color);
        }

        .card-front p {
            font-size: 1em;
            color: #555;
        }

        .card-back {
            background-color: var(--card-bg);
            color: var(--text-color);
            transform: rotateY(180deg);
            padding: 25px;
            box-sizing: border-box;
            overflow-y: auto;
        }
        
        .card-back h3 {
            color: var(--accent-color);
            margin-top: 0;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .card-back ul {
            list-style-type: none;
            padding-left: 5px;
            margin-top: 15px;
        }
        
        .card-back ul li {
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
        }
        
        .card-back ul li::before {
            content: '🔹';
            position: absolute;
            left: 0;
            top: 2px;
            color: var(--accent-color);
            font-size: 0.9em;
        }

        .sub-header {
            font-weight: 700;
            color: var(--secondary-color);
            margin-top: 20px;
            margin-bottom: 10px;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 5px;
        }
    /* 主容器布局调整 - 移除flex布局以保持原始排版 */

.attachments-panel {
    width: 250px;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    height: fit-content;
    position: sticky;
    top: 20px;
    flex-shrink: 0;
    z-index: 1000;
    border: 1px solid #e0e0e0;
}
.attachments-panel h3 {
    color: #004085;
    margin-top: 0;
    margin-bottom: 15px;
    text-align: center;
    border-bottom: 2px solid #004085;
    padding-bottom: 10px;
}
.attachment-item {
    background-color: #f8f9fa;
    border: 1px solid #ced4da;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}
.attachment-item:hover {
    background-color: #e9ecef;
    border-color: #004085;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.attachment-item h4 {
    margin: 0 0 8px 0;
    color: #004085;
    font-size: 14px;
}
.attachment-item p {
    margin: 0 0 10px 0;
    font-size: 12px;
    color: #6c757d;
    line-height: 1.4;
}
.download-btn {
    display: inline-block;
    background-color: #28a745;
    color: white;
    text-decoration: none;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
    transition: background-color 0.3s ease;
    width: 100%;
    text-align: center;
    box-sizing: border-box;
}
.download-btn:hover {
    background-color: #218838;
    text-decoration: none;
    color: white;
}
.download-btn:before {
    content: "▼ ";
    margin-right: 5px;
}

/* 可折叠浮动框样式 */
.attachments-panel {
    position: fixed;
    top: 10px;
    right: 10px;
    width: auto; /* 自适应宽度 */
    min-width: 250px; /* 最小宽度 */
    max-width: calc(100vw - 60px); /* 最大宽度，留出边距 */
    max-height: calc(100vh - 80px); /* 留出更多空间避免滚动条 */
    overflow-y: auto;
    overflow-x: hidden; /* 隐藏横向滚动条 */
    z-index: 9999;
    box-shadow: 0 8px 24px rgba(0,0,0,0.25);
    border: 2px solid #004085;
    transform: translateX(100%); /* 默认完全隐藏 */
    transition: transform 0.3s ease;
    /* 自定义滚动条样式 */
    scrollbar-width: thin;
    scrollbar-color: #004085 #f0f0f0;
}

/* WebKit浏览器滚动条样式 */
.attachments-panel::-webkit-scrollbar {
    width: 6px;
}

.attachments-panel::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb {
    background: #004085;
    border-radius: 3px;
}

.attachments-panel::-webkit-scrollbar-thumb:hover {
    background: #0056b3;
}

/* 展开时显示 */
.attachments-panel.expanded {
    transform: translateX(0);
}

/* 移除container的margin-right设置，保持原始布局 */

.attachment-item {
    width: 250px;
    margin-right: 0;
    display: block;
    margin-bottom: 12px;
    white-space: nowrap; /* 防止文本换行导致宽度过大 */
}

.attachment-item h4 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* 长文本显示省略号 */
    max-width: 100%;
}

.attachments-panel h3 {
    font-size: 16px;
    margin-bottom: 12px;
    white-space: nowrap; /* 标题不换行 */
}

.attachments-panel a {
    white-space: nowrap; /* 链接文本不换行 */
    overflow: hidden;
    text-overflow: ellipsis;
    display: inline-block;
    max-width: 100%;
}

/* 浮动切换按钮 */
.float-toggle {
    position: fixed;
    top: 10px;
    right: 10px;
    width: 50px;
    height: 50px;
    background: #004085;
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    z-index: 10000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.float-toggle:hover {
    background: #0056b3;
    transform: scale(1.1);
}

.float-toggle:active {
    transform: scale(0.95);
}

/* 当面板展开时，按钮位置动态调整 */
.attachments-panel.expanded ~ .float-toggle {
    right: 20px; /* 保持在面板左侧的固定位置 */
    opacity: 0.7; /* 展开时降低透明度，避免遮挡 */
}
    </style>
</head>
<body>

    <div class="container">
        <h1>《美洲原住民历史》</h1>
        <p class="instructions">交互式卡片摘要 (点击任意卡片翻转查看详情)</p>
        <div class="legend">
            <strong>图例:</strong> <span class="fact">事实陈述</span> | <span class="opinion">作者观点/情感表达</span>
        </div>

        <div class="card-grid">
            <!-- Card for Introduction -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">📖</div>
                        <h2>引言</h2>
                        <p>探索美洲大陆的原始守护者</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>引言核心要点</h3>
                        <ul>
                            <li><span class="opinion">作者希望这本书能让读者对原住民文化有更深的理解和欣赏。</span></li>
                            <li><span class="fact">在哥伦布到达之前，美洲大陆已经居住着多元化的原住民群体，他们有各自的国家、传统和语言。</span></li>
                            <li><span class="opinion">这些原住民过着与环境和谐相处的生活，是这片土地上真正骄傲而高贵的居民。</span></li>
                            <li>本书将探讨原住民的早期历史、文化、著名人物以及他们所遭受的不公待遇。</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Card for Chapter 1 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">👣</div>
                        <h2>第一章</h2>
                        <p>美洲原住民的早期历史</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第一章核心要点</h3>
                        <div class="sub-header">他们从何而来？</div>
                        <ul>
                            <li><span class="opinion">普遍存在一个误解，即哥伦布是第一个“发现”美洲的人，而事实上他到达时，那里早已有人居住。</span></li>
                            <li><span class="fact">哥伦布错误地将当地人称为“印第安人”，因为他以为自己到达了印度。</span></li>
                        </ul>
                        <div class="sub-header">克洛维斯优先理论</div>
                        <ul>
                            <li><span class="fact">这是一个传统理论，认为克洛维斯人是美洲最早的居民，约于公元前9200年通过白令陆桥从西伯利亚迁徙而来。</span></li>
                        </ul>
                        <div class="sub-header">肯纳威克人</div>
                        <ul>
                            <li><span class="fact">1996年发现的9000年前的肯纳威克人遗骸，其头骨特征挑战了克洛维斯优先理论。</span></li>
                        </ul>
                         <div class="sub-header">早期互动</div>
                         <ul>
                            <li><span class="opinion">在哥伦布之前，已有维京人、中国人等航海者访问过美洲。</span></li>
                            <li><span class="fact">美洲最古老的文明遗迹约有12500年历史。</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Card for Chapter 2 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">🎨</div>
                        <h2>第二章</h2>
                        <p>文化与传统</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第二章核心要点</h3>
                        <div class="sub-header">多元化的部落文化</div>
                        <ul>
                            <li><span class="fact">美洲原住民由数千个部落组成，文化、信仰和生活方式各异，其宗教核心是“万物有灵论”。</span></li>
                            <li><span class="opinion">他们的文化在某些方面很原始（石器时代），但在个人发展和生活质量方面却非常先进。</span></li>
                        </ul>
                        <div class="sub-header">主要部落介绍</div>
                        <ul>
                            <li><strong>纳瓦霍族 (Navajo)</strong>: <span class="fact">北美最大部落，以农业、复杂仪式和治疗性沙画闻名。</span></li>
                            <li><strong>切罗基族 (Cherokee)</strong>: <span class="fact">被迫从东南部迁徙，以星形被子和编织艺术著称，庆祝“绿玉米节”。</span></li>
                            <li><strong>苏族 (Sioux)</strong>: <span class="fact">游牧民族，追随野牛群。女性擅长珠饰艺术，男性在牛皮上作画。</span></li>
                            <li><strong>普韦布洛人 (Pueblo)</strong>: <span class="fact">以独特的土坯多层住宅闻名。文化深受西班牙影响，但保留了古老信仰。</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Card for Chapter 3 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">⚔️</div>
                        <h2>第三章</h2>
                        <p>美国内战中的原住民</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第三章核心要点</h3>
                        <div class="sub-header">加入邦联军（南方）原因</div>
                        <ul>
                            <li><span class="fact">部分部落因憎恨联邦政府的“血泪之路”政策而寻求报复，且一些精英本身也拥有奴隶。</span></li>
                        </ul>
                        <div class="sub-header">加入联邦军（北方）原因</div>
                        <ul>
                            <li><span class="fact">联邦军承诺支付报酬并希望借此收复失地。</span> <span class="opinion">讽刺的是，联邦军对原住民的种族歧视更严重。</span></li>
                        </ul>
                        <div class="sub-header">著名原住民人物</div>
                        <ul>
                            <li><strong>斯坦德·瓦蒂</strong>: <span class="fact">切罗基人，邦联军准将，军衔最高的原住民，最后投降的邦联将军。</span></li>
                            <li><strong>伊利·S·帕克</strong>: <span class="fact">塞内卡部落首领，格兰特将军的军事秘书，起草了李将军的受降书。</span></li>
                            <li><strong>亨利·贝瑞·洛里</strong>: <span class="fact">兰比部落领袖，为谢尔曼将军的部队提供关键引导，助其获胜。</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Card for Chapter 4 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">🦅</div>
                        <h2>第四章</h2>
                        <p>历史上的著名人物</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第四章核心要点</h3>
                        <ul>
                            <li><strong>杰罗尼莫 (Geronimo)</strong>: <span class="fact">传奇的阿帕奇战争领袖，为家人复仇，长期抵抗墨西哥和美国军队，精通游击战。</span></li>
                            <li><strong>科奇斯 (Cochise)</strong>: <span class="fact">另一位著名的阿帕奇领袖，成功抵抗墨西哥入侵者，并与美国政府长期冲突。</span></li>
                            <li><strong>坐牛 (Sitting Bull)</strong>: <span class="fact">苏族最著名的酋长，在小大角河战役中领导部落全歼卡斯特部队。</span></li>
                            <li><strong>疯马 (Crazy Horse)</strong>: <span class="fact">苏族的杰出战争领袖，骁勇善战，与坐牛并肩作战，最终被俘后遇害。</span></li>
                            <li><strong>庞蒂亚克 (Pontiac)</strong>: <span class="fact">18世纪渥太华部落酋长，领导了对抗英国殖民者的“庞蒂亚克战争”。</span></li>
                            <li><strong>黑鹰 (Black Hawk)</strong>: <span class="fact">索克部落战争领袖，为保卫家园领导了“黑鹰战争”，最终失败。</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Card for Chapter 5 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">💔</div>
                        <h2>第五章</h2>
                        <p>遭受的虐待</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第五章核心要点</h3>
                        <ul>
                            <li><span class="opinion">美洲原住民的历史充满了因外国入侵者而遭受虐待的泪水，是美国历史上一个黑暗的时期。</span></li>
                            <li><span class="fact">在19世纪，美国原住民的总人口下降了近80%。</span></li>
                        </ul>
                        <div class="sub-header">重大暴行事件</div>
                        <ul>
                            <li><strong>血泪之路</strong>: <span class="fact">1838年，数万名原住民被强行迁移，途中上万人死亡。</span></li>
                            <li><strong>塔鲁斯哈奇之战</strong>: <span class="fact">1813年，美军屠杀了一个克里克部落村庄的几乎所有人。</span></li>
                            <li><strong>布拉索斯河大屠杀</strong>: <span class="fact">1846年，德州游骑兵射杀了一支友好的原住民狩猎队。</span></li>
                            <li><strong>赖特大屠杀</strong>: <span class="fact">19世纪50年代，以和平谈判为诱饵，屠杀了近50名莫多克部落成员。</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Card for Chapter 6 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">💡</div>
                        <h2>第六章</h2>
                        <p>你可能不知道的事</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第六章核心要点</h3>
                        <ul>
                            <li><strong>宝嘉康蒂的真实故事</strong>: <span class="opinion">迪士尼电影严重失实。</span> <span class="fact">她与约翰·史密斯无恋情，后被俘并被迫嫁给英国人，21岁客死他乡，一生是悲剧。</span></li>
                            <li><strong>海华沙</strong>: <span class="fact">是易洛魁联盟的真实创始人之一，其部落联盟的政治结构被认为启发了美国宪法。</span></li>
                            <li><strong>疾病的影响</strong>: <span class="fact">欧洲人带来的天花等疾病对原住民是毁灭性的，造成的死亡远超战争。</span></li>
                            <li><strong>马匹的引入</strong>: <span class="fact">马匹由欧洲人重新引入美洲，原住民迅速将其融入文化。</span></li>
                            <li><strong>纳瓦霍密码语者</strong>: <span class="fact">二战期间，他们的语言成为美军无法破解的密码，为战争胜利做出巨大贡献。</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Card for Chapter 7 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">🌌</div>
                        <h2>第七章</h2>
                        <p>神话与传说</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第七章核心要点</h3>
                        <div class="sub-header">创世神话</div>
                        <ul>
                            <li><strong>易洛魁创世神话</strong>: <span class="fact">讲述“天空女神”在巨龟背上创造陆地，其双胞胎儿子塑造世界善恶的故事。</span></li>
                            <li><strong>阿伯纳基创世传说</strong>: <span class="fact">“伟大神灵”在梦中无意创造了世界，并最终接纳了它的不完美。</span></li>
                        </ul>
                        <div class="sub-header">神话生物</div>
                        <ul>
                            <li><strong>皮行者 (Skinwalkers)</strong>: <span class="fact">纳瓦霍传说中通过杀害亲人获得变形能力的邪恶巫师。</span></li>
                            <li><strong>僵腿熊</strong>: <span class="opinion">可能源于对猛犸象的口述记忆。</span></li>
                            <li><strong>水下豹</strong>: <span class="fact">苏族传说中来自地下的水怪。</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Card for Chapter 8 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">📜</div>
                        <h2>第八章</h2>
                        <p>谚语与智慧</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第八章核心要点</h3>
                        <ul>
                             <li><span class="opinion">本章展示了原住民深植于自然的智慧，这些谚语虽古老但至今仍具指导意义。</span></li>
                        </ul>
                        <div class="sub-header">部分谚语</div>
                        <ul>
                            <li><strong>“没有死亡，只有世界的变换。”</strong> - <span class="opinion">表达对生命轮回的豁达。</span></li>
                            <li><strong>“在你穿着邻居的鹿皮鞋走过两个月亮之前，不要评判他。”</strong> - <span class="opinion">强调理解先于评判。</span></li>
                            <li><strong>“我们每一次深思熟虑，都必须考虑我们的决定对未来七代人的影响。”</strong> - <span class="opinion">体现了深远的责任感。</span></li>
                        </ul>
                        <div class="sub-header">当代影响</div>
                        <ul>
                             <li><span class="fact">本章列举了名人的多元看法，并介绍了多位在各领域取得杰出成就的当代原住民，以及支持他们的名人。</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Card for Chapter 9 -->
            <div class="card-container">
                <div class="card">
                    <div class="card-front">
                        <div class="card-front-icon">🌿</div>
                        <h2>第九章</h2>
                        <p>医药与治疗</p>
                        <p><strong>(点击翻转)</strong></p>
                    </div>
                    <div class="card-back">
                        <h3>第九章核心要点</h3>
                        <div class="sub-header">传统医学理念</div>
                        <ul>
                            <li><span class="fact">是一种整体疗法，强调身心灵的和谐，认为疾病源于失衡。治疗高度依赖草药，并与精神信仰结合。</span></li>
                        </ul>
                        <div class="sub-header">治疗实践</div>
                        <ul>
                             <li><span class="fact">包括草药、仪式舞蹈、汗蒸房净化等。知识由“医药人”通过口头代代相传。</span></li>
                        </ul>
                        <div class="sub-header">历史压迫与复兴</div>
                        <ul>
                             <li><span class="fact">从19世纪末起，美国政府长期禁止原住民的宗教仪式（如“鬼舞”），直接打击了他们的医疗传统。禁令直到1978年才被废除。</span></li>
                            <li><span class="fact">“伤膝河大屠杀”是政府镇压“鬼舞”运动的血腥高潮，数百名拉科塔人被屠杀。</span></li>
                            <li><span class="opinion">如今，原住民的传统医学和智慧正重新受到重视。</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <script>
        const cards = document.querySelectorAll('.card-container');
        cards.forEach(card => {
            card.addEventListener('click', () => {
                card.classList.toggle('is-flipped');
            });
        });
    </script>


<div class="attachments-panel" id="attachments-panel">
    <h3>原文</h3>
    <a href="book_native_americans_files/book.html" target="_blank">源链接</a>
</div>
<button class="float-toggle" id="float-toggle" title="打开附件面板">◁</button>
<script>
// 浮动框展开/收起功能
document.addEventListener('DOMContentLoaded', function() {
    const panel = document.getElementById('attachments-panel');
    const toggleBtn = document.getElementById('float-toggle');
    
    if (!panel || !toggleBtn) return;
    
    // 切换面板显示状态
    function togglePanel() {
        panel.classList.toggle('expanded');
        // 更新按钮图标
        const isExpanded = panel.classList.contains('expanded');
        toggleBtn.textContent = isExpanded ? '▷' : '◁';
        toggleBtn.title = isExpanded ? '关闭附件面板' : '打开附件面板';
        
        // 动态调整按钮位置
        if (isExpanded) {
            // 等待面板展开动画完成后调整按钮位置
            setTimeout(() => {
                const panelWidth = panel.offsetWidth;
                toggleBtn.style.right = (panelWidth + 30) + 'px';
            }, 300);
        } else {
            toggleBtn.style.right = '10px';
        }
    }
    
    // 点击切换按钮
    toggleBtn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        togglePanel();
    });
    
    // 点击页面其他地方时收起面板
    document.addEventListener('click', function(e) {
        const isClickOnPanel = panel.contains(e.target);
        const isClickOnToggle = toggleBtn.contains(e.target);
        
        if (!isClickOnPanel && !isClickOnToggle) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = '◁';
            toggleBtn.title = '打开附件面板';
            toggleBtn.style.right = '10px'; // 重置按钮位置
        }
    });
    
    // ESC键关闭面板
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && panel.classList.contains('expanded')) {
            panel.classList.remove('expanded');
            toggleBtn.textContent = '◁';
            toggleBtn.title = '打开附件面板';
            toggleBtn.style.right = '10px'; // 重置按钮位置
        }
    });
});
</script>
</body>
</html>